<script src="jquery-3.3.1.min.js"></script>

<style>

.celdas{
background: url("/img/celda.jpg");
color: red;
width: 40px;
height: 40px;
}

.celdaVacia{
background: url("/img/libre.jpg");
color: red;
width: 40px;
height: 40px;
}

</style>

<script>

$(document).ready(function() {
		var contador = 0;
		$("#tablero tr td").on('click', function(event) {
			event.preventDefault();
			
			var p = $(this).attr('id');

			$.ajax({
				url: '/validarCelda',
				type: 'POST',
				dataType: 'json',
				data: {posicion: p},
				success: function(data){
			

				if(data==true){
					window.location.href = "/perdio";
				}
				else{

					$("#"+p).addClass("celdaVacia");
					$("#"+p).removeClass("celdas");
					contador++;
				if(contador == 3){
					window.location.href = "/gano";
				}
					

					
					
				}
					
				}
			});
			
		});
	});

</script>


<h1>Bienvenido <%= @nombre %></h5>





<table id="tablero" border="1">
<% (1..@nivel.to_i).each do |i| %>
<tr>

<% (1..@nivel.to_i).each do |j| %>
<td id='<%= "#{j+(@nivel.to_i*(i-1))}" %>' class="celdas"> </td>

<% end %>

</tr>

<% end %>
</table>
